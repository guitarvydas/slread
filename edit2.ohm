S {
  Main = ident "{" Rule+ "}"
  Rule = ruleident "=" Item+
  
  Item 
  = "(" Item+ ")" op? -- parenthesized
  | Item op? -- withop
  | Itembody Tag? -- unparenthesized
  
  Itembody
    = "|" itemident op? -- or
    | itemident op?     -- and
  op = "+" | "*" | "?"
  
  Tag = "--" itemident
ruleident = applySyntactic<Ruleident>
Ruleident = ident &"="
itemident = applySyntactic<Itemident>
Itemident = ident ~"="
ident = letter+
}
