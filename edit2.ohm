S {
  main = ident "{" ws* rule+ ws* "}" ws*
  rule = ruleident tEQ item+
  item 
  = "(" item+ ")"  ws* op? ws* -- parenthesized
  | item ws* op? ws* -- withop
  | itembody tag? ws* -- unparenthesized
  itembody
    = "|" ws* itemident op? ws* -- or
    | itemident op? ws*     -- and
  op = "+" | "*" | "?"
  
  tag = "--" ws* itemident
ruleident = ident ws* &"="
itemident = ident ws* ~"="
ident = letter+ ws*
tEQ = "=" ws*
ws = space
}