S {
OhmSpecification = ident "{" RuleDef+ "}"
RuleDef = RuleDefIdent "=" MatchBody
MatchBody = SingleRule AltLeg*

AltLeg = "|" SingleRule
SingleRule = PrimaryOp+ Tag?

PrimaryOp = Primary op?

Primary
  = "(" MatchBody ")" -- nested
  | string             -- string
  | RuleRefIdent       -- ref


Tag = "--" TagIdent
RuleDefIdent = ident &"="
RuleRefIdent = ident ~"="
TagIdent = ident ~"="
op = "+" | "*" | "?"
ident = letter+
string = dq (~dq any)* dq
dq = "\""
}

